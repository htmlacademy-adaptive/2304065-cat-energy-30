.instruction {
  position: relative;

  @media (min-width: $tablet-width) and (max-width: $desktop-width - 1px) {
    width: $tablet-width;

    &::after {
      content: "";
      position: absolute;
      bottom: 0;
      right: 0;
      width: 100vw;
      height: 1px;
      background-color: #e6e6e6;
      box-shadow: 100vw 0 0 #e6e6e6;
    }
  }
}

.instruction__wrapper {
  margin: 0 auto 49px;
  width: $mobile-wrapper;

  @media (min-width: $tablet-width) {
    width: $tablet-wrapper;
    margin: 0 auto 103px;
  }

  @media (min-width: $desktop-width) {
    width: $desktop-wrapper;
    margin: 0 auto -44px;
  }
}

.instruction__title {
  @include title(36px, 40px, none);
  margin-bottom: 38px;

  @media (min-width: $tablet-width) {
    @include title(60px, 60px, none);
    margin-bottom: 72px;
  }
}

.instruction__list {
  @include flexbox(baseline, center, column);
  gap: 20px;
  counter-reset: list;

  @media (min-width: $tablet-width) {
    display: grid;
    grid-template-columns: 247px auto;
    gap: 134px 137px;
  }

  @media (min-width: $desktop-width) {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    gap: 0;
  }
}

.instruction__item {
  position: relative;
  display: flex;
  align-items: center;

  &::before {
    @include decorative-backing(60px, 60px, 0);
    margin-right: 20px;
  }

  @media (min-width: $tablet-width) {
    @include flexbox(flex-start, flex-start, column);

    &::before {
      @include decorative-backing(80px, 80px, 0);
      margin-bottom: 31px;
    }
  }

  @media (min-width: $desktop-width) {
    @include flexbox(flex-start, flex-start, column);
    margin-bottom: 126px;

    &::before {
      @include decorative-backing(80px, 80px, 0);
      margin-bottom: 31px;
    }
  }
}

.instruction__item--benefit {
  &::after {
    @include flexbox(center, center);
    @include mask-image(url("../../images/icons/stack.svg#index_icon-benefit"), 30px 32px, $color-title-text-white);
    content: "";
    position: absolute;
    width: 60px;
    height: 60px;
  }

  @media (min-width: $tablet-width) {
    .instruction__description {
      width: 230px;
    }

    &::after {
      width: 80px;
      height: 80px;
    }
  }
}

.instruction__item--powder {
  &::after {
    @include flexbox(center, center);
    @include mask-image(url("../../images/icons/stack.svg#index_icon-powder"), 26px 28px, $color-title-text-white);
    content: "";
    position: absolute;
    width: 60px;
    height: 60px;
  }

  @media (min-width: $tablet-width) {
    .instruction__description {
      width: 246px;
    }

    &::after {
      width: 80px;
      height: 80px;
    }
  }

  @media (min-width: $desktop-width) {
    margin-left: 19px;
  }
}

.instruction__item--replacement {
  &::after {
    @include flexbox(center, center);
    @include mask-image(url("../../images/icons/stack.svg#index_icon-replacement"), 25px 30px, $color-title-text-white);
    content: "";
    position: absolute;
    width: 60px;
    height: 60px;
  }

  @media (min-width: $tablet-width) {
    .instruction__description {
      width: 247px;
    }

    &::after {
      width: 80px;
      height: 80px;
    }
  }

  @media (min-width: $desktop-width) {
    margin-left: 5px;
  }
}

.instruction__item--changes {
  & .instruction__description {
    br {
      display: none;
    }

    @media (min-width: $tablet-width) {
      br {
        display: inline;
      }
    }
  }

  &::after {
    @include flexbox(center, center);
    @include mask-image(url("../../images/icons/stack.svg#index_icon-changes"), 26px 31px, $color-title-text-white);
    content: "";
    position: absolute;
    width: 60px;
    height: 60px;
  }

  @media (min-width: $tablet-width) {
    .instruction__description {
      width: 249px;
    }

    &::after {
      width: 80px;
      height: 80px;
    }
  }

  @media (min-width: $desktop-width) {
    margin-right: -3px;
  }
}

.instruction__description {
  position: relative;
  width: 200px;
  margin: 0;
  z-index: 2;

  @media (min-width: $tablet-width) {
    @include main-text(16px, 24px);

    &::before {
      @include title(280px, 280px, uppercase, #f2f2f2);
      counter-increment: list;
      content: counters(list, ".");
      position: absolute;
      bottom: -57px;
      right: 0;
      z-index: -1;
    }
  }
}
